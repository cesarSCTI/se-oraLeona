{%- liquid
  assign blog_handle = section.settings.blog 
  assign limit = section.settings.limit | default: 8
-%}
{% if blog_handle != blank and blogs[blog_handle] != blank %}
<section class="blog-thumbnails">
  <div class="blog-thumbnails__inner">
    {% for article in blogs[blog_handle].articles limit: limit %}
      {% if article.image %}
        <a
          href="{{ article.url }}"
          class="blog-thumbnail"
          aria-label="{{ article.title | escape }}"
        >
          {{
            article.image
            | image_url: width: 600
            | image_tag:
              loading: 'lazy',
              class: 'blog-thumbnail__img',
              alt: article.image.alt | default: article.title | escape
          }}
        </a>
      {% endif %}
    {% endfor %}
  </div>
</section>
{% endif %}

{% style %}
.blog-thumbnails{
  background: {{ section.settings.bg_color }};
  padding: 24px 0;
}

.blog-thumbnails__inner{
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  gap: {{ section.settings.gap }}px;
  justify-content: center;
  align-items: center;
  flex-wrap: nowrap;
}

.blog-thumbnail{
  display: block;
  width: {{ section.settings.thumb_size }}px;
  height: {{ section.settings.thumb_size }}px;
  overflow: hidden;
  border-radius: {{ section.settings.radius }}px;
}

.blog-thumbnail__img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform .35s ease, opacity .35s ease;
}

.blog-thumbnail:hover .blog-thumbnail__img{
  transform: scale(1.06);
  opacity: .9;
}

/* Mobile */
@media(max-width: 768px){
  .blog-thumbnails__inner{
    overflow-x: auto;
    justify-content: flex-start;
    padding: 0 16px;
  }
}
{% endstyle %}

{% schema %}
{
  "name": "Blog article thumbnails",
  "settings": [
    {
      "type": "blog",
      "id": "blog",
      "label": "Selecciona el blog"
    },
    {
      "type": "range",
      "id": "limit",
      "label": "Número de artículos",
      "min": 3,
      "max": 20,
      "step": 1,
      "default": 8
    },
    {
      "type": "range",
      "id": "thumb_size",
      "label": "Tamaño de thumbnail (px)",
      "min": 60,
      "max": 180,
      "step": 10,
      "default": 90
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Espaciado (px)",
      "min": 6,
      "max": 40,
      "step": 2,
      "default": 12
    },
    {
      "type": "range",
      "id": "radius",
      "label": "Border radius (px)",
      "min": 0,
      "max": 20,
      "step": 2,
      "default": 0
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Color de fondo",
      "default": "#F7F7E8"
    }
  ],
  "presets": [
    {
      "name": "Blog thumbnails"
    }
  ]
}
{% endschema %}
